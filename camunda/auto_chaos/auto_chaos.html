Давно прочитал в журнале Компьютерра статью
<a style="text-decoration: underline; color: #3366ff;"
   title="Автоматизация хаоса"
   href="https://old.computerra.ru/1999/295/196346/"
   target="_blank" rel="noopener noreferrer">"Автоматизация хаоса"</a>. 1999 год!!!
В google полно документов на эту тему.
Пару слов хочется черкнуть от себя. В большинстве проектов, на которых приходилось работать, так или иначе возникает эта тема.<br/>
Хотя и не очень явно.
<p><img style="display: block; margin-left: auto; margin-right: auto;" title="Суслика видишь?" src="images/suslik3.jpg"
        alt="Суслика видишь?" width="762" height="426"/></p>
<hr id="system-readmore"/>
<br/>
После различных опытов со всякими Documentum и т.п. подобными системами, пришел к выводу, что все это как-то тяжеловато, требует кучу времени, квалификации и ДЕНЕГ.
Что хочется?
<ul>
    <li>Описать сам бизнес-процесс</li>
    <li>Обеспечить переход от одного этапа к другому</li>
    <li>Сообщить пользователю, что от него требуется какое-то действие и <b>предоставить информацию</b> для принятия этого решения.</li>
    <li>Обеспечить доступ к внешним системам</li>
    <li>Какие-то этапы должны выполняться автоматом, какие-то запрашивать решение пользователя.</li>
</ul>

И вот нашлась Camunda (<a style="text-decoration: underline; color: #3366ff;"
                 title="Camunda"
                 href="https://camunda.com/"
                 target="_blank" rel="noopener noreferrer">https://camunda.com/</a>,
<a style="text-decoration: underline; color: #3366ff;"
   title="Camunda RUS"
   href="https://camundarus.ru/"
   target="_blank" rel="noopener noreferrer">https://camundarus.ru/</a>).
В двух словах что такое Camunda - есть схема бизнес-процесса (БП) состоящего из этапов и конечных точек процесса. Конечных точек может быть несколько.
Сам БП в качестве этапа может включать запуск другого БП.<br/>
Среда легковесная, доступная для настройки, полностью подвластная разработчику <b>JAVA</b> (и не только),
без тяжелых настроек среды.<br/><br/>
На одном из проектов мне удалось применить Camunda и увидеть всю мощь.
Изначально, как архитектурное решение задачи, в проекте был использован karaf
(<a style="text-decoration: underline; color: #3366ff;"
   title="Karaf в микросервисе Kubernetes"
   href="http://v.perm.ru/main/index.php/36-karaf-v-mikroservise-kuber"
   target="_blank" rel="noopener noreferrer">Karaf в микросервисе Kubernetes</a>).
И подразумевалось, что плагины karaf как-то помогут решить задачу изменчивости проекта, процессов.
Стояла задача обеспечить автоматизацию <b>бизнес-процессов</b> (до которых еще нужно было дойти) и <b>документооборот</b> между головной организацией и ее дилерами/партнерами.
Партнеры могут иметь какую-то свою собственную инфраструктуру или не иметь.
Некоторые партнеры имели свой собственный весьма мощный, развитый ИТ ландшафт (решения MS, Kubernetes, VPN и т.п.), со своими ограничениями и возможностями,
у некоторых только пара компьютеров. У некоторых на сервис завязаны отделы сотрудников, у некоторых только один человек.<br/><br/>
Сама разработка этапов разделена по разработчикам. Этапы и разработчики слабо завязаны на результаты разработки друг-друга. И решить все эти загадки помогла camunda. Ниже пример ОДНОГО ИЗ бизнес-процессов:<br/>
<p><span style="font-weight: 400;"> <img class="pull-center" src="images/camunda_proj.png" alt=""/></span></p>
<p><span style="font-weight: 400;"> <img class="pull-center" src="images/part_camunda.png" alt=""/></span></p>
<br/>
Нужна поддержка специалиста/менеджера, находящегося внутри предприятия.
И совсем необязательно наличие ИТ образования у этого человека.
Разработчик <b>должен</b> договориться с этим специалистом, объяснив суть работы Camunda на уровне "кубиков", ее базовых составных частей:
<ul>
    <li>тип процесса</li>
    <li>кратко про экземпляр процесса</li>
    <li>начало процесса</li>
    <li>один или несколько исходов</li>
    <li>этапы процесса(task). Типы этапов: автоматический или требующий принятия решения человеком</li>
    <li>ветвления</li>
    <li>что-то сказать о контексте всего бизнес-процесса и контексте конкретного этапа. Очень возможно, что для получения контекста, нужен будет доступ к каким-то внешним системам (другие системы, базы данных и т.п.).</li>
</ul>

<h3 dir="auto">Текущее состояние бизнес-процессов Camunda.</h3>

<a style="text-decoration: underline; color: #3366ff;"
   title="TaskList"
   href="https://camunda.com/platform/tasklist/"
   target="_blank" rel="noopener noreferrer">https://camunda.com/platform/tasklist/</a>

<h3 dir="auto">Тестирование бизнес-процессов.</h3>
<ul>
    <li><a style="text-decoration: underline; color: #3366ff;"
           title="Интеграционное тестирование REST"
           href="http://v.perm.ru/main/index.php/34-behave-testirovanie"
           target="_blank" rel="noopener noreferrer">через behave-test</a></li>
    <li><a style="text-decoration: underline; color: #3366ff;"
           title="Тестирование БП"
           href="https://habr.com/ru/companies/simbirsoft/articles/657697/"
           target="_blank" rel="noopener noreferrer">еще пример</a></li>
</ul>

<h3 dir="auto">Конспект по внедрению Camunda.</h3>
<ul>
    <li>Зная возможности Camunda, транслировать вопросы заказчику через аналитиков.
        При этом придется подготовить аналитиков и КРАТКО рассказать про основные возможности, чтобы разработчик и аналитик говорили на одном языке.
        И с другой стороны, аналитик при общении с заказчиком держал картинку Camunda в голове.</li>
    <li>Разъяснить разработчикам ключевые термины Camunda: id <u>ТИПА</u> бизнес процесса, id <u>ЗАПУЩЕННОГО</u> процесса, состояние (id этапа) процесса. В этом поможет Camunda Task List.</li>
    <li>Как выполнить переход на следующий этап БП</li>
    <li>Рассказать об этапах, где БП ждет ответа от пользователя и автоматических этапах</li>
    <li>Разработчикам показать связь Tomcat и Camunda</li>
    <li>Разработчикам рассказать о размещении Camunda в СУБД</li>
    <li>Тестирование БП</li>
    <li>С devops инженерами обсудить размещение в Kubernetes. В конкретном проекте, Camunda с бизнес-процессами были выделены отдельный микросервис. Но может работать как application в Tomcat.</li>
    <li>При накате новых версий схем бизнес-процессов, все предыдущие процессы должны быть завершены. Или новую версию bpmn схемы разместить по новому пути (???).</li>
</ul>


<br/>
<b>Примеры:</b><br/>
<a style="text-decoration: underline; color: #3366ff;"
   title="Как я тащил проект или MVC для kubernetes"
   href="http://v.perm.ru/main/index.php/33-istoriya-odnogo-proekta"
   target="_blank" rel="noopener noreferrer">Как я тащил проект или MVC для kubernetes</a>
<br/>
<a style="text-decoration: underline; color: #3366ff;"
   title="Простенький пример реализации"
   href="https://github.com/cherepakhin/camunda_springboot_db"
   target="_blank" rel="noopener noreferrer">Простенький пример реализации</a>
<br/>
<a style="text-decoration: underline; color: #3366ff;"
   title="И еще один"
   href="https://github.com/cherepakhin/camunda-spring-boot-first"
   target="_blank" rel="noopener noreferrer">И еще один</a><br/>
<br/>
<b>Неоднозначные выводы:</b><br/>
<ul>
    <li>При реализации бизнес-процессов, некоторые сотрудники оказались за бортом, они стали больше не нужны.
        Наблюдался некоторое сопротивление (саботаж?) сотрудников, для ктр. мы делали эту автоматизацию.</li>
    <li>Camunda показала, что можно УДОБНО связать этапы обработки данных в АЛГОРИТМ, где обрабатываемые данные привязаны к потоку/задаче/состояние.
        Сами этапы независимы и есть "мета" средства алгоритмизации: старт/конец процесса, if/else/for, передача переменных, переход в другой алгоритм (call/goto).</li>
</ul>




