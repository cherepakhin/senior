<p>В заметке описаны инструменты автоматизированного BDD тестирования REST и примеры использования.
    Тесты проведены на простом REST сервисе
    <a style="text-decoration: underline; color: #3366ff;"
       title="https://github.com/cherepakhin/animals"
       href="https://github.com/cherepakhin/animals"
       target="_blank" rel="noopener noreferrer">https://github.com/cherepakhin/animals</a>
</p>
<hr id="system-readmore"/>

<p><b>Простое тестирование JUnit5 с выводом результатов в Allure</b></p>
Для общения с Rest можно использовать н.п. RestTemplate.
Примеры тестирования <a style="text-decoration: underline; color: #3366ff;"
                        title="https://javabydeveloper.com/junit-5-with-allure-reports-example/"
                        href="https://javabydeveloper.com/junit-5-with-allure-reports-example/"
                        target="_blank" rel="noopener noreferrer">https://javabydeveloper.com/junit-5-with-allure-reports-example/</a>.
Очень подробно описан вывод в Allure, с различными группировками и прочими возможностями.
<br/>
<p>Проведение тестов:</p>
<pre class="language-shell">
<code>git clone https://github.com/javabydeveloper/Junit-5-tutorials-master/tree/master/junit5-allure-report-example
cd junit5-allurreport-example
mvn clean test allure:report</code>
</pre>
<br/>
<p><i>Необходимое замечание</i></p>
Нужно обеспечить начальное состояние теста и восстановить состояние после любого исхода теста. В самом простом случае можно установить его прямо в тесте. Или, лучше, воспользоваться средствами JUnit5:
<ul>
    <li>@BeforeAll - выполняется ПЕРЕД выполнением ВСЕХ методов класса теста</li>
    <li>@BeforeEach - выполняется ПЕРЕД выполнением КАЖДОГО метода класса теста</li>
    <li>@AfterEach - выполняется ПОСЛЕ выполнением КАЖДОГО метода класса теста</li>
    <li>@AfterAll - выполняется ПОСЛЕ выполнением ВСЕХ методов класса теста</li>
</ul>

<p><b>Behave-restful (Python!)</b></p>
<a style="text-decoration: underline; color: #3366ff;"
   title="https://github.com/behave-restful/behave-restful"
   href="https://github.com/behave-restful/behave-restful"
   target="_blank" rel="noopener noreferrer">https://github.com/behave-restful/behave-restful</a>
<br/>
<a style="text-decoration: underline; color: #3366ff;"
   title="https://github.com/cherepakhin/..."
   href="https://github.com/cherepakhin/..."
   target="_blank" rel="noopener noreferrer">Пример использования</a>
<br/>
<p>Описание...</p>

<p><b>JBehave</b></p>
<a style="text-decoration: underline; color: #3366ff;"
   title="https://jbehave.org/"
   href="https://jbehave.org/"
   target="_blank" rel="noopener noreferrer">https://jbehave.org/</a>
<br/>
<a style="text-decoration: underline; color: #3366ff;"
   title="https://github.com/cherepakhin/..."
   href="https://github.com/cherepakhin/..."
   target="_blank" rel="noopener noreferrer">Пример использования</a>
<br/>
<p>Описание...</p>

<p><b>RestAssured</b></p>
<a style="text-decoration: underline; color: #3366ff;"
   title="https://rest-assured.io/"
   href="https://rest-assured.io/"
   target="_blank" rel="noopener noreferrer">https://rest-assured.io/</a>
<br/>
<a style="text-decoration: underline; color: #3366ff;"
   title="https://github.com/cherepakhin/..."
   href="https://github.com/cherepakhin/..."
   target="_blank" rel="noopener noreferrer">Пример использования</a>
<br/>
<p>Описание...</p>

<p><b>Вопросы:</b></p>
<p>Это не UNIT тесты, это интеграционные тесты. При обычном UNIT тестировании,
можно откатить, например, состояние базы данных (установить режим транзакций). </p>
<p>Всегда-ли возможно установить состояние базы данных в состояние на ктр. расчитывает тест (что-то типа "mvn flyway:migrate")?
    И что такое начальное состояние БД для конкретного теста?</p>
<p>Другие внешние ресурсы (очереди, авторизация, др. смежные сервисы). Как-то бы мокать все эти дела или использовать <b>@Before..</b>/<b>@After..</b></p>
<p>Похож на предыдущий пункт - тестирование бизнес ПРОЦЕССОВ и состояния ПРОЦЕССА УСТАНОВЛЕНО ГДЕ-ТО.
    Проблема заключается в том, что тест будет включать в себя ряд шагов и при возникновении ошибки
    на одном из этапов нужно откатить состояние ресурса на начальное состояние теста. Либо обеспечить начальное состояние для теста, либо вернуть в начальное состояние после теста.<br/>
</p>
<p>Нужен будет валидатор JSON схемы. Например, такой
<a style="text-decoration: underline; color: #3366ff;"
   title="https://github.com/networknt/json-schema-validator"
   href="https://github.com/networknt/json-schema-validator"
   target="_blank" rel="noopener noreferrer">https://github.com/networknt/json-schema-validator</a>.

Пример использования
<a style="text-decoration: underline; color: #3366ff;"
   title="https://www.baeldung.com/introduction-to-json-schema-in-java"
   href="https://www.baeldung.com/introduction-to-json-schema-in-java"
   target="_blank" rel="noopener noreferrer">https://www.baeldung.com/introduction-to-json-schema-in-java/</a>
</p>
